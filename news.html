<!DOCTYPE html>
<html lang="ru">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–æ–≤–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ - SafeNet</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 1rem;
            text-align: center;
        }
        
        .container {
            width: 90%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 0;
        }
        
        .news-grid {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .news-item {
            background-color: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-left: 4px solid var(--secondary);
        }
        
        .news-item h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .news-date {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .news-content {
            color: #555;
            line-height: 1.6;
        }
        
        .news-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            color: #7f8c8d;
        }
        
        .error {
            background-color: #ffeaea;
            border: 1px solid #ffcccc;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #d63031;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .refresh-btn {
            margin-bottom: 1rem;
            background-color: var(--primary);
        }
        
        .admin-section {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .admin-section h3 {
            color: #856404;
            margin-bottom: 1rem;
        }

        .site-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .site-title {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .site-description {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>SafeNet - –ó–∞—â–∏—Ç–∞ –æ—Ç –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞</h1>
            <p>–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
        </div>
    </header>

    <div class="container">
        <div class="site-header">
            <h2 class="site-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
            <p class="site-description">–°–∞–º—ã–µ —Å–≤–µ–∂–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ –∑–∞—â–∏—Ç–µ –æ—Ç –º–æ—à–µ–Ω–Ω–∏–∫–æ–≤</p>
        </div>

        <button class="btn refresh-btn" onclick="loadNews()">–û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏</button>
        
        <div id="news-container" class="news-grid">
            <div class="loading">
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</p>
            </div>
        </div>

        <div class="admin-section">
        <div style="text-align: center; margin-top: 2rem;">
            <a href="index.html" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —Å–∞–π—Ç</a>
        </div>
    </div>

    <script>
        // üëáüëáüëá –í–ê–ñ–ù–û! –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û –ù–ê ID –í–ê–®–ï–ô GOOGLE –¢–ê–ë–õ–ò–¶–´ üëáüëáüëá
        const GOOGLE_SHEET_ID = '1fCv50TBwrxraXDEgGiT7DKyuDKhoJg4fdPTPVWyhQ6Q';
        const SHEET_NAME = '–õ–∏—Å—Ç1'; // –ù–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ Google –¢–∞–±–ª–∏—Ü—ã
        async function loadNews() {
            const newsContainer = document.getElementById('news-container');
            newsContainer.innerHTML = '<div class="loading"><p>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</p></div>';
            
            try {
                // URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Google –¢–∞–±–ª–∏—Ü—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
                const url = `https://docs.google.com/spreadsheets/d/${GOOGLE_SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;
                
                const response = await fetch(url);
                const text = await response.text();
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç Google –¢–∞–±–ª–∏—Ü—ã
                const json = JSON.parse(text.substring(47).slice(0, -2));
                
                const news = [];
                const rows = json.table.rows;
                
                // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É) –∏ –Ω–∞—á–∏–Ω–∞–µ–º —Å–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–∏
                for (let i = 1; i < rows.length; i++) {
                    const cells = rows[i].c;
                    if (cells && cells.length >= 3) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã 3 –∫–æ–ª–æ–Ω–∫–∏
                        news.push({
                            date: cells[0]?.v || new Date().toISOString().split('T')[0],
                            title: cells[1]?.v || '–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞',
                            content: cells[2]?.v || '',
                            image: cells[3]?.v || null
                        });
                    }
                }
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
                news.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                displayNews(news);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π:', error);
                newsContainer.innerHTML = `
                    <div class="error">
                        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>
                        <p><small>–û—à–∏–±–∫–∞: ${error.message}</small></p>
                        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É–∫–∞–∑–∞–Ω ID —Ç–∞–±–ª–∏—Ü—ã –≤ –∫–æ–¥–µ.</p>
                    </div>
                `;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
        function displayNews(news) {
            const newsContainer = document.getElementById('news-container');
            
            if (news.length === 0) {
                newsContainer.innerHTML = '<div class="loading"><p>–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</p></div>';
                return;
            }
            
            newsContainer.innerHTML = '';
            
            news.forEach(item => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                
                const formattedDate = new Date(item.date).toLocaleDateString('ru-RU', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                newsItem.innerHTML = `
                    <h3>${item.title}</h3>
                    <div class="news-date">${formattedDate}</div>
                    <div class="news-content">${item.content}</div>
                    ${item.image ? `<img src="${item.image}" class="news-image" alt="${item.title}">` : ''}
                `;
                
                newsContainer.appendChild(newsItem);
            });
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–∞–±–ª–∏—Ü—É –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
        function setupLinks() {
            const sheetLink = document.querySelector('.admin-section a');
            if (sheetLink) {
                sheetLink.href = `https://docs.google.com/spreadsheets/d/${GOOGLE_SHEET_ID}/edit`;
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            setupLinks();
            loadNews();
        });
    </script>
</body>
</html>